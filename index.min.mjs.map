{"version":3,"file":"index.min.mjs","sources":["Angle.mjs","Breadcrumb.mjs","Menu.mjs","Movable.mjs","RollDigit.mjs"],"sourcesContent":["/*!\n * 匿龙组件库 @nyloong/components v0.2.0\n * (c) 2023-2024 猛火Fierflame\n * @license MIT\n */\nconst style = `\\\n:host {\n\tdisplay: inline-block;\n\tcolor: #000;\n\tmargin: auto;\n\tposition: relative;\n\tborder-radius: 100%;\n\tborder: 1px solid;\n\twidth: 1em;\n\theight: 1em;\n}\n:host([hidden]) {\n\tdisplay: none;\n}\ndiv {\n\theight: 1px;\n\twidth: 50%;\n\tposition: absolute;\n\tbackground: currentColor;\n\tmargin: auto 0 auto auto;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\ttransform-origin: left;\n}\n`;\nclass Angle extends HTMLElement {\n\t/** @readonly */\n\tstatic formAssociated = true;\n\t/** @readonly */\n\t#printer = document.createElement('div');\n\t/** @readonly */\n\t#internals = this.attachInternals();\n\tconstructor() {\n\t\tsuper();\n\t\tconst root = this.attachShadow({mode: 'closed'});\n\t\troot.appendChild(document.createElement('style')).textContent = style;\n\t\troot.appendChild(this.#printer);\n\t\t/**\n\t\t *\n\t\t * @param {PointerEvent} event\n\t\t * @returns {void}\n\t\t */\n\t\tconst onTouch = event => {\n\t\t\tif (!(event.buttons & 1)) { return; }\n\t\t\tconst { left, width, top, height } = this.getBoundingClientRect();\n\t\t\tconst x = event.clientX - left - width / 2;\n\t\t\tconst y = event.clientY - top - height / 2;\n\t\t\tconst value = Math.atan2(y, x) / Math.PI * 180;\n\t\t\tthis.value = Math.round(value);\n\t\t\tthis.dispatchEvent(new InputEvent('input'));\n\t\t\tthis.dispatchEvent(new InputEvent('change'));\n\t\t};\n\t\tthis.addEventListener('pointerdown', onTouch);\n\t\tthis.addEventListener('pointermove', onTouch);\n\t\tthis.value = this.getAttribute('value');\n\t}\n\t#value = 0;\n\t/** @type {number} */\n\tget value() {\n\t\treturn this.#value;\n\t}\n\t/**\n\t * @param {number | string | null} [v]\n\t */\n\tset value(v) {\n\t\tconst a = parseInt(String(v));\n\t\tif (!Number.isFinite(a)) { return; }\n\t\tthis.#value = a;\n\t\tthis.#printer.style.transform = `rotate(${a}deg)`;\n\t\tthis.#internals.setFormValue(String(a));\n\t}\n\tconnectedCallback() {\n\t\tif (this.getAttribute('tabindex') === null) {\n\t\t\tthis.setAttribute('tabindex', '0');\n\t\t}\n\t}\n}\n\ncustomElements.define('nl-angle', Angle);\n\nexport { Angle as default };\n","/*!\n * 匿龙组件库 @nyloong/components v0.2.0\n * (c) 2023-2024 猛火Fierflame\n * @license MIT\n */\nconst style = `::slotted(*)::after {content: var(--nl-breadcrumb-separator, ' / ');}`;\nconst styleOfLast = `::slotted(:last-child)::after {content: none}`;\n\nclass Breadcrumb extends HTMLElement {\n\tstatic observedAttributes = ['separator'];\n\t#style = document.createElement('style');\n\t/**\n\t *\n\t * @param {string | null} newVal\n\t * @returns {void}\n\t */\n\t#separator(newVal) {\n\t\tif (newVal === null) {\n\t\t\tthis.#style.textContent = '';\n\t\t\treturn;\n\t\t}\n\t\tconst content = JSON.stringify(newVal);\n\t\tconst style = `::slotted(*)::after {content: ${content}; }`;\n\t\tthis.#style.textContent = style;\n\t}\n\tconstructor() {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({mode:'closed'});\n\t\tshadow.appendChild(document.createElement('style'))\n\t\t\t.textContent = style;\n\t\tshadow.appendChild(this.#style);\n\t\tshadow.appendChild(document.createElement('style'))\n\t\t\t.textContent = styleOfLast;\n\t\tshadow.appendChild(document.createElement('slot'));\n\t}\n\t/**\n\t * 分隔符\n\t * @type {string | null}\n\t */\n\tget separator() { return this.getAttribute('separator'); }\n\tset separator(separator) {\n\t\tif (separator === undefined || separator === null) {\n\t\t\tthis.removeAttribute('separator');\n\t\t} else {\n\t\t\tthis.setAttribute('separator', separator);\n\t\t}\n\t}\n\tconnectedCallback() {\n\t\tthis.#separator(this.separator);\n\t}\n\t/**\n\t * @param {string} attrName\n\t * @param {string | null} oldVal\n\t * @param {string | null} newVal\n\t * @returns {void}\n\t */\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (oldVal === newVal) { return; }\n\t\tswitch (attrName) {\n\t\t\tcase 'separator': {\n\t\t\t\tthis.#separator(newVal);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\ncustomElements.define('nl-breadcrumb', Breadcrumb);\n\nexport { Breadcrumb as default };\n","/*!\n * 匿龙组件库 @nyloong/components v0.2.0\n * (c) 2023-2024 猛火Fierflame\n * @license MIT\n */\nconst style = `\n:host {\n\tdisplay: contexts;\n}\ndiv {\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tflex-direction: row;\n\talign-items: stretch;\n}\ndiv[hidden] {\n\tdisplay: none;\n}\ndiv slot {\n\tdisplay: inline;\n\tflex: 1;\n}\ndiv::after {\n\tcontent: '';\n\twidth: 0;\n\theight: 0;\n\tbox-sizing: content-box;\n\tborder: transparent solid 0.3em;\n\tborder-inline-start-color: currentColor;\n\tmargin: auto;\n\tmargin-inline-start: 0.3em;\n}\ndialog {\n\tposition: fixed;\n\tmargin: 0;\n\tbox-sizing: border-box;\n\tmax-width: calc(100% - 36px);\n\tmax-height: calc(100% - 36px);\n\tuser-select: none;\n\tpadding: .2em;\n\tborder: 1px solid;\n\toutline: none;\n}\ndiv, dialog ::slotted(*) {\n\tcolor: var(--nyloong-menu-fg, #000);\n\tbackground: var(--nyloong-menu-bg, #FFF);\n}\ndiv.open, div:hover, div:focus, dialog ::slotted(:hover), dialog ::slotted(:focus) {\n\tcolor: var(--nyloong-menu-fg-highlight, #000);\n\tbackground: var(--nyloong-menu-bg-highlight, #6666);\n}\n:host([disabled]) div, dialog ::slotted([disabled]) {\n\tcolor: var(--nyloong-menu-fg-disabled, #AAA);\n\tbackground: var(--nyloong-menu-bg-disabled, #FFF);\n}\n\ndialog::backdrop {\n\tbackground: transparent;\n}\n`;\n\nconst openMenus = new Set();\ndocument.addEventListener('pointerdown', e => {\n\tif (!e.isPrimary) { return; }\n\tconst els = new Set(e.composedPath());\n\tfor (const menu of [...openMenus]) {\n\t\tif (els.has(menu)) { continue; }\n\t\tmenu.close();\n\t}\n});\nconst verticalWritingMode = new Set([\n\t'vertical-lr', 'vertical-rl', 'sideways-lr', 'sideways-rl',\n]);\n\nconst hasPopover = typeof HTMLElement.prototype.showPopover === 'function';\n/**\n *\n * @param {object} option\n * @param {number} option.left\n * @param {number} option.top\n * @param {number} option.width\n * @param {number} option.height\n * @param {boolean} rowVertical\n * @param {boolean} rowReverse\n * @param {boolean} colReverse\n * @returns {[[number, number, number], [number, number, number]]}\n */\nfunction getSize({left, top, width, height}, rowVertical, rowReverse, colReverse) {\n\tconst right = window.innerWidth - left - width;\n\tconst bottom = window.innerHeight - top - height;\n\t/** @type {[[number, number, number], [number, number, number]]} */\n\tconst size = [\n\t\t[left, width, right],\n\t\t[top, height, bottom],\n\t];\n\tif (rowVertical) { size.reverse(); }\n\tif (rowReverse) { size[1].reverse(); }\n\tif (colReverse) { size[0].reverse(); }\n\n\treturn size;\n\n}\nconst directionDefault = ['blockEnd', 'blockStart', 'inlineEnd', 'inlineStart'];\nconst alignDefault = ['start', 'end', 'center'];\n\nconst subMenuDirection = ['inlineEnd', 'inlineStart'];\nconst subMenuAlign = ['start', 'end'];\n\n/**\n *\n * @param {string?} [val]\n * @returns {string[]}\n */\nfunction getDirections(val) {\n\t/** @type {string[]} */\n\tconst direction = [];\n\t/**\n\t *\n\t * @param {string} v\n\t */\n\tfunction add(v) {\n\t\tif (direction.includes(v)) { return; }\n\t\tdirection.push(v);\n\t}\n\tfor (const v of (val || '').replace(/\\n|\\s|-/g, '').toLowerCase().split(/,/)) {\n\t\tif (v === 'inlineend' || v === 'inline') { add('inlineEnd'); }\n\t\tif (v === 'inlinestart' || v === 'inline') { add('inlineStart'); }\n\t\tif (v === 'blockend' || v === 'block') { add('blockEnd'); }\n\t\tif (v === 'blockstart' || v === 'block') { add('blockStart'); }\n\t}\n\treturn direction.length ? direction : directionDefault;\n}\n/**\n *\n * @param {string?} [val]\n * @returns {string[]}\n */\nfunction getAligns(val) {\n\t/** @type {string[]} */\n\tconst align = [];\n\tfor (const v of (val || '').replace(/\\n|\\s|-/g, '').toLowerCase().split(/,/)) {\n\t\tif (!['start', 'end', 'center'].includes(v)) { continue; }\n\t\tif (align.includes(v)) { continue; }\n\t\talign.push(v);\n\t}\n\treturn align.length ? align : alignDefault;\n}\n/**\n *\n * @param {Element} root\n * @returns {[boolean, boolean, boolean]}\n */\nfunction getLayout(root) {\n\tconst style = getComputedStyle(root);\n\tconst writingMode = style.writingMode?.toLowerCase();\n\tconst vertical = verticalWritingMode.has(writingMode);\n\tconst rowReverse = ['vertical-rl', 'sideways-rl'].includes(writingMode);\n\tconst colReverse = style.direction.toLowerCase() === 'rtl' !== (writingMode === 'sideways-lr');\n\treturn [vertical, rowReverse, colReverse];\n}\n\nclass Menu extends HTMLElement {\n\tstatic observedAttributes = ['open', 'hidden', 'target', 'x', 'y', 'direction', 'align', 'modal', 'disabled'];\n\tclose() { this.removeAttribute('open'); }\n\tshow() { this.setAttribute('open', ''); }\n\tget open() { return this.hasAttribute('open'); }\n\tset open(open) { if (open) { this.show(); } else { this.close(); } }\n\tget disabled() { return this.hasAttribute('disabled'); }\n\tset disabled(disabled) {\n\t\tif (disabled) {\n\t\t\tthis.setAttribute('disabled', '');\n\t\t} else {\n\t\t\tthis.removeAttribute('disabled');\n\t\t}\n\t}\n\tget modal() { return this.hasAttribute('modal'); }\n\tset modal(modal) {\n\t\tif (modal) {\n\t\t\tthis.setAttribute('modal', '');\n\t\t} else {\n\t\t\tthis.removeAttribute('modal');\n\t\t}\n\t}\n\tget x() { return parseFloat(this.getAttribute('x') || '') || 0; }\n\tset x(x) {\n\t\tif (x && typeof x === 'number' && Number.isFinite(x)) {\n\t\t\tthis.setAttribute('x', String(x));\n\t\t} else {\n\t\t\tthis.removeAttribute('x');\n\t\t}\n\t}\n\tget y() { return parseFloat(this.getAttribute('y') || '') || 0; }\n\tset y(y) {\n\t\tif (y && typeof y === 'number' && Number.isFinite(y)) {\n\t\t\tthis.setAttribute('y', String(y));\n\t\t} else {\n\t\t\tthis.removeAttribute('y');\n\t\t}\n\t}\n\tget target() { return this.getAttribute('target'); }\n\tset target(target) {\n\t\tif (typeof target !== 'string') {\n\t\t\tthis.removeAttribute('target');\n\t\t} else {\n\t\t\tthis.setAttribute('target', target);\n\t\t}\n\t}\n\t#direction = directionDefault;\n\t#align = alignDefault;\n\tget direction() { return [...this.#direction]; }\n\tset direction(v) {\n\t\tconst direction = Array.isArray(v) ? v.filter(Boolean).join(',') : v;\n\t\tif (direction !== null && typeof direction !== 'string') { return; }\n\t\tif (!direction) {\n\t\t\tthis.removeAttribute('direction');\n\t\t} else {\n\t\t\tthis.setAttribute('direction', direction);\n\t\t}\n\t}\n\tget align() { return [...this.#align]; }\n\tset align(v) {\n\t\tconst align = Array.isArray(v) ? v.filter(Boolean).join(',') : v;\n\t\tif (align !== null && typeof align !== 'string') { return; }\n\t\tif (!align) {\n\t\t\tthis.removeAttribute('direction');\n\t\t} else {\n\t\t\tthis.setAttribute('direction', align);\n\t\t}\n\t}\n\n\t#label = document.createElement('div');\n\t#dialog = document.createElement('dialog');\n\t/** @type {Menu} */\n\t#root = this;\n\tconstructor() {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({ mode: 'closed' });\n\t\tshadow.appendChild(document.createElement('style')).textContent = style;\n\n\t\tconst label = shadow.appendChild(this.#label);\n\t\tlabel.appendChild(document.createElement('slot')).name = 'label';\n\n\t\tlabel.addEventListener('pointerenter', e=> {\n\t\t\tif (!this.#parentMenu) { return; }\n\t\t\tif (!e.isPrimary) { return; }\n\t\t\tthis.#show();\n\t\t});\n\t\tlabel.addEventListener('click', e=> { e.stopPropagation(); });\n\n\t\tconst dialog = shadow.appendChild(this.#dialog);\n\t\tconst dialogSlot = dialog.appendChild(document.createElement('slot'));\n\t\tdialog.addEventListener('click', e => {\n\t\t\tif (this.#parentMenu) { return; }\n\t\t\tconst list = e.composedPath();\n\t\t\tconst index = list.indexOf(dialog);\n\t\t\tif (index >= 0 && list.slice(0, index).find(v => v instanceof Element && v.getAttribute('disabled') !== null || v instanceof HTMLHRElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.close();\n\t\t});\n\t\tdialog.addEventListener('close', e=> { this.close(); });\n\t\tdialogSlot.addEventListener('pointermove', e => {\n\t\t\tif (!e.isPrimary) { return; }\n\t\t\tconst currentSubMenu = this.#currentSubMenu;\n\t\t\tif (!currentSubMenu) { return; }\n\t\t\tif (e.composedPath().includes(currentSubMenu)) { return; }\n\t\t\tcurrentSubMenu.#close();\n\t\t});\n\t\tdialog.addEventListener('scroll', e=> {\n\t\t\tif (!this.#mounted) { return; }\n\t\t\tconst currentSubMenu = this.#currentSubMenu;\n\t\t\tif (currentSubMenu) {\n\t\t\t\tcurrentSubMenu.#update();\n\t\t\t}\n\t\t});\n\t\tthis.addEventListener('contextmenu', e=> {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}, {capture: true});\n\t}\n\n\t/** @type {Element?} */\n\t#target = null;\n\tget targetElement() { return this.#target; }\n\tset targetElement(el) { this.#target = el instanceof Element ? el : null; }\n\t#open = false;\n\t#mounted = false;\n\t/** @type {Menu?} */\n\t#currentSubMenu = null;\n\t/** @type {Menu?} */\n\t#parentMenu = null;\n\tget parentMenu() { return this.#parentMenu; }\n\t#close() {\n\t\tif (!this.#open) { return; }\n\t\tconst subMenu = this.#currentSubMenu;\n\t\tif (subMenu) { subMenu.#close(); }\n\t\tconst parent = this.#parentMenu;\n\t\tif (parent && parent.#currentSubMenu === this) {\n\t\t\tparent.#currentSubMenu = null;\n\t\t} else {\n\t\t\topenMenus.delete(this);\n\t\t}\n\t\tconst dialog = this.#dialog;\n\t\tdialog.close();\n\n\t\tthis.#label.classList.remove('open');\n\t\tdialog.removeAttribute('popover');\n\t\tthis.#open = false;\n\t}\n\t#show() {\n\t\tif (this.#open || !this.#mounted) { return; }\n\t\tconst parent = this.#parentMenu;\n\t\tconst dialog = this.#dialog;\n\t\tif (parent) {\n\t\t\tif (!parent.#open || this.disabled) { return; }\n\t\t\tconst currentSubMenu = parent.#currentSubMenu;\n\t\t\tif (currentSubMenu) {\n\t\t\t\tcurrentSubMenu.#close();\n\t\t\t}\n\t\t\tparent.#currentSubMenu = this;\n\t\t\tif (hasPopover) {\n\t\t\t\tdialog.popover = 'manual';\n\t\t\t\tdialog.showPopover();\n\t\t\t} else {\n\t\t\t\tdialog.show();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.#updateLayout();\n\t\t\tconst subMenu = this.#currentSubMenu;\n\t\t\tif (subMenu) { subMenu.#close(); }\n\t\t\tif (hasPopover && !this.hasAttribute('modal')) {\n\t\t\t\tdialog.popover = 'manual';\n\t\t\t\tdialog.showPopover();\n\t\t\t\topenMenus.add(this);\n\t\t\t} else {\n\t\t\t\tdialog.showModal();\n\t\t\t}\n\t\t}\n\t\tthis.#label.classList.add('open');\n\t\trequestAnimationFrame(() => { if (this.#mounted) { this.#update(); } });\n\t\tthis.#open = true;\n\t}\n\t#rowVertical = false;\n\t#rowReverse = false;\n\t#colReverse = false;\n\t#getTarget() {\n\t\tif (this.#parentMenu) { return this.#label; }\n\t\tconst targetElement = this.#target;\n\t\tif (targetElement) { return targetElement; }\n\t\tconst {target} = this;\n\t\tif (target === '') { return this.parentElement; }\n\t\tif (!target) { return null; }\n\t\ttry { return document.querySelector(target); } catch {}\n\t\treturn null;\n\t}\n\t#update() {\n\t\tif (!this.#mounted) { return; }\n\t\tconst dialog = this.#dialog;\n\t\tconst target = this.#getTarget();\n\t\tconst root = this.#root;\n\t\tconst rowVertical = root.#rowVertical;\n\t\tconst size = getSize(\n\t\t\ttarget?.getBoundingClientRect() || {top: this.y, left: this.x, width: 0, height: 0},\n\t\t\troot.#rowVertical,\n\t\t\troot.#rowReverse,\n\t\t\troot.#colReverse,\n\t\t);\n\t\tconst [[inlineStart, inlineSize, inlineEnd], [blockStart, blockSize, blockEnd]] = size;\n\t\tconst [d, s] = this.#parentMenu ? [subMenuDirection, subMenuAlign] : [this.#direction, this.#align];\n\t\tconst rect = dialog.getBoundingClientRect();\n\t\tconst inline = rowVertical ? rect.height : rect.width;\n\t\tconst block = rowVertical ? rect.width : rect.height;\n\t\t/** @type {[string, number, number][]} */\n\t\tconst dirs = d.map(d => {\n\t\t\tswitch (d) {\n\t\t\t\tcase 'blockStart': return [d, blockStart / block, 1];\n\t\t\t\tcase 'blockEnd': return [d, blockEnd / block, 1];\n\t\t\t\tcase 'inlineStart': return [d, 1, inlineStart / inline];\n\t\t\t\tdefault: return ['inlineEnd', 1, inlineEnd / inline];\n\t\t\t}\n\t\t});\n\n\t\tconst [dir] = dirs.reduce((r, d) => {\n\t\t\tif (r[1] < 1 && d[1] < 1) { return r[1] >= d[1] ? r : d; }\n\t\t\tif (r[1] >= 1 && d[1] < 1) { return r; }\n\t\t\tif (d[1] >= 1 && r[1] < 1) { return d; }\n\t\t\tif (r[2] >= 1 || r[2] >= d[2]) { return r; }\n\t\t\treturn d;\n\t\t});\n\t\tconst blockDir = dir === 'blockEnd' || dir === 'blockStart';\n\t\tif (blockDir) { size.reverse(); }\n\t\tconst [[inlineStartX, inlineSizeX, inlineEndX], [blockStartX, blockSizeX, blockEndX]] = size;\n\t\tconst [rowSize, colSize] = blockDir ? [inline, block] : [block, inline];\n\t\tconst align = s.find(a => a === 'start' ? blockSizeX + blockEndX > rowSize : a === 'start' ? blockSizeX + blockStartX > rowSize : true) || '';\n\n\t\tlet insetInlineStart = dir === 'inlineStart' || dir === 'blockStart' ? inlineStartX - colSize : inlineStartX + inlineSizeX;\n\t\tlet insetBlockStart = 0;\n\t\tswitch (align) {\n\t\t\tcase 'start':\n\t\t\t\tinsetBlockStart = blockStartX;\n\t\t\t\tbreak;\n\t\t\tcase 'end':\n\t\t\t\tinsetBlockStart = blockStartX + blockSizeX - rowSize;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tinsetBlockStart = Math.max(18, Math.min(blockStartX + blockSizeX / 2 - rowSize / 2, blockStartX + blockSizeX + blockEndX - 18 - rowSize));\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (blockDir) {\n\t\t\t[insetInlineStart, insetBlockStart] = [insetBlockStart, insetInlineStart];\n\t\t}\n\t\tdialog.style.insetBlockStart = `${insetBlockStart}px`;\n\t\tdialog.style.insetInlineStart = `${insetInlineStart}px`;\n\n\t\tconst currentSubMenu = this.#currentSubMenu;\n\t\tif (!currentSubMenu) { return; }\n\t\tcurrentSubMenu.#update();\n\t}\n\tupdate() {\n\t\tif (!this.#mounted) { return; }\n\t\treturn this.#update();\n\n\t}\n\t#updateLayout() {\n\t\tconst [rowVertical, rowReverse, colReverse] = getLayout(this);\n\t\tthis.#rowVertical = rowVertical;\n\t\tthis.#rowReverse = rowReverse;\n\t\tthis.#colReverse = colReverse;\n\t}\n\tconnectedCallback() {\n\t\tthis.#mounted = true;\n\t\tconst parent = this.parentNode;\n\t\tconst parentMenu = parent instanceof Menu ? parent : null;\n\t\tthis.#parentMenu = parentMenu;\n\t\tthis.#root = parentMenu ? parentMenu.#root : this;\n\n\t\tthis.#label.hidden = !parentMenu;\n\t\tconst open = !this.hidden && (parentMenu ? parentMenu.#open : false);\n\t\tif (open) {\n\t\t\tthis.#show();\n\t\t}\n\t}\n\tdisconnectedCallback() {\n\t\tthis.close();\n\t\tthis.#root = this;\n\t\tthis.#mounted = false;\n\t\tthis.#parentMenu = null;\n\t}\n\t/**\n\t * @param {string} attrName\n\t * @param {string | null} oldVal\n\t * @param {string | null} newVal\n\t * @returns {void}\n\t */\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (!this.#mounted) { return; }\n\t\tif (oldVal === newVal) { return; }\n\t\tswitch (attrName) {\n\t\t\tcase 'disabled': {\n\t\t\t\tif (this.#mounted && this.open && newVal !== null) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'open': {\n\t\t\t\tif (!this.#parentMenu && !this.hidden) {\n\t\t\t\t\tif (newVal === null) {\n\t\t\t\t\t\tthis.#close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.#show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'modal': {\n\t\t\t\tif (newVal !== null) {\n\t\t\t\t\tconst dialog = this.#dialog;\n\t\t\t\t\tif (dialog.getAttribute('popover') !== null) {\n\t\t\t\t\t\tdialog.removeAttribute('popover');\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'hidden': {\n\t\t\t\tif (newVal !== null) {\n\t\t\t\t\tthis.#close();\n\t\t\t\t} else if (this.open && !this.#parentMenu) {\n\t\t\t\t\tthis.#show();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'direction': {\n\t\t\t\tthis.#direction = getDirections(newVal);\n\t\t\t\tif (this.#mounted && !this.#parentMenu) { this.#update(); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'align': {\n\t\t\t\tthis.#align = getAligns(newVal);\n\t\t\t\tif (this.#mounted && !this.#parentMenu) { this.#update(); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'target': case 'x': case 'y': {\n\t\t\t\tif (this.#mounted && !this.#parentMenu) { this.#update(); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\ncustomElements.define('nl-menu', Menu);\n\nexport { Menu as default };\n","/*!\n * 匿龙组件库 @nyloong/components v0.2.0\n * (c) 2023-2024 猛火Fierflame\n * @license MIT\n */\nconst style$1 = `:host {\n\tdisplay: block;\n\toverflow: hidden;\n\tposition: relative;\n}\n:host([hidden]) { display: none; }`;\n\n/**\n *\n * @param {MovableArea} el\n * @param {Set<import('./index.mjs').Interface>} children\n * @returns {[() => void, () => void]}\n */\nfunction init$1(el, children) {\n\tconst shadow = el.attachShadow({ mode: 'closed' });\n\tshadow.appendChild(document.createElement('style')).textContent = style$1;\n\tshadow.appendChild(document.createElement('slot'));\n\tconst observer = new ResizeObserver(e => {\n\t\tconst last = e.pop();\n\t\tif (!last) { return; }\n\t\tconst { contentRect: { width, height } } = last;\n\n\t\tfor (const t of children) {\n\t\t\tt.resize(width, height);\n\t\t}\n\t});\n\t/**\n\t *\n\t * @param {Event} event\n\t * @returns {import('./index.mjs').Interface | null}\n\t */\n\tfunction getTarget(event) {\n\t\tconst list = event.composedPath();\n\n\t\tconst k = list.findIndex(t => t === el);\n\t\tconst e = k < 0 ? [] : list.slice(0, k).reverse();\n\t\tfor (const child of [...children]) {\n\t\t\tconst r = child.match(e);\n\t\t\tif (r) { return child; }\n\t\t\tif (r === null) { return null; }\n\t\t}\n\t\treturn null;\n\t}\n\t/** @type {Record<number, import('./index.mjs').Interface>} */\n\tconst touchTargets = {};\n\n\t/**\n\t *\n\t * @param {PointerEvent} event\n\t * @returns {void}\n\t */\n\tfunction pointerdown(event) {\n\t\tconst target = getTarget(event);\n\t\tif (!target) { return; }\n\t\tconst { pageX, pageY, pointerId } = event;\n\t\tconst { x: OffX, y: OffY } = el.getBoundingClientRect();\n\t\tconst x = pageX - OffX;\n\t\tconst y = pageY - OffY;\n\t\t/** @type {boolean?} */\n\t\tlet state = null;\n\t\tif (event.pointerType === 'mouse') {\n\t\t\tstate = target.mouseBegin(x, y, event.buttons);\n\t\t} else if (event.pointerType === 'touch') {\n\t\t\tstate = target.touchBegin(pointerId, x, y);\n\t\t}\n\t\tif (typeof state !== 'boolean') { return; }\n\t\tif (state) { el.setPointerCapture(pointerId); }\n\t\ttouchTargets[pointerId] = target;\n\t}\n\t/**\n\t *\n\t * @param {PointerEvent} event\n\t * @returns {void}\n\t */\n\tfunction pointermove(event) {\n\t\tconst { pointerId } = event;\n\t\tconst target = touchTargets[pointerId];\n\t\tif (!target) { return; }\n\t\tconst { pageX, pageY } = event;\n\t\tconst { x: OffX, y: OffY } = el.getBoundingClientRect();\n\t\tconst x = pageX - OffX;\n\t\tconst y = pageY - OffY;\n\t\tif (event.pointerType === 'mouse') {\n\t\t\ttarget?.mouseMove(x, y, event.buttons);\n\t\t\treturn;\n\t\t}\n\t\tif (event.pointerType === 'touch') {\n\t\t\ttarget.touchMove(pointerId, x, y);\n\t\t}\n\t}\n\t/**\n\t *\n\t * @param {PointerEvent} event\n\t * @returns {void}\n\t */\n\tfunction pointerup(event) {\n\t\tconst { pointerId } = event;\n\t\tif (el.hasPointerCapture(pointerId)) {\n\t\t\tel.releasePointerCapture(pointerId);\n\t\t}\n\t\tconst target = touchTargets[pointerId];\n\t\tif (!target) { return; }\n\t\tif (event.pointerType === 'mouse') {\n\t\t\ttarget.mouseEnd();\n\t\t}\n\t\tif (event.pointerType === 'touch') {\n\t\t\tdelete touchTargets[pointerId];\n\t\t\ttarget.touchEnd(pointerId);\n\t\t}\n\t}\n\t/**\n\t *\n\t * @param {WheelEvent} event\n\t * @returns {void}\n\t */\n\tfunction wheel(event) {\n\t\tconst target = getTarget(event);\n\t\tif (!target) { return; }\n\t\tconst { deltaMode, deltaX, deltaY, pageX, pageY } = event;\n\t\tconst { x: OffX, y: OffY } = el.getBoundingClientRect();\n\t\tconst x = pageX - OffX;\n\t\tconst y = pageY - OffY;\n\t\ttarget.wheel(deltaMode, deltaX, deltaY, x, y);\n\t}\n\n\tel.addEventListener('wheel', wheel, true);\n\n\tel.addEventListener('pointermove', pointermove);\n\tel.addEventListener('pointerdown', pointerdown);\n\tel.addEventListener('pointerup', pointerup);\n\tel.addEventListener('pointercancel', pointerup);\n\tel.addEventListener('lostpointercapture', pointerup);\n\tel.addEventListener('touchmove', e => e.preventDefault());\n\treturn [() => {\n\t\tobserver.observe(el);\n\t}, () => {\n\t\tobserver.unobserve(el);\n\t}];\n\n}\n\nclass MovableArea extends HTMLElement {\n\t/** @type {Set<import('./index.mjs').Interface>} */\n\t#children = new Set();\n\t/** @type {() => void} */\n\t#connect;\n\t/** @type {() => void} */\n\t#disconnect;\n\tconstructor() {\n\t\tsuper();\n\t\t[this.#connect, this.#disconnect] = init$1(this, this.#children);\n\t}\n\t/**\n\t *\n\t * @param {import('./index.mjs').Interface} o\n\t * @returns {() => void}\n\t */\n\tregister(o) {\n\t\tconst children = this.#children;\n\t\tchildren.add(o);\n\t\tconst { width, height } = this.getBoundingClientRect();\n\t\to.resize(width, height);\n\t\treturn () => {\n\t\t\tchildren.delete(o);\n\t\t};\n\n\t}\n\t/**\n\t * @returns {void}\n\t */\n\tconnectedCallback() { this.#connect(); }\n\t/**\n\t * @returns {void}\n\t */\n\tdisconnectedCallback() { this.#disconnect(); }\n\t/**\n\t * @returns {void}\n\t */\n\tadoptedCallback() { }\n}\n\n/**\n * 线性回归求斜率\n * @param {number[]} t\n * @param {number[]} v\n * @returns {number}\n */\nfunction regression(t, v) {\n\tconst tb = t.reduce((a, b) => a + b) / t.length;\n\tconst vb = v.reduce((a, b) => a + b) / v.length;\n\treturn t.map((_, i) => (t[i] - tb) * (v[i] - vb)).reduce((a, b) => a + b)\n\t\t/ t.map(a => (a - tb) ** 2).reduce((a, b) => a + b);\n}\n\n/**\n *\n * @param {number[][]} frame\n * @returns {(() => [number, number, boolean]) | undefined }\n */\nfunction getInertiaFn(frame) {\n\tconst time = performance.now() / 1000;\n\tlet last = time;\n\tfor (let i = 0; i < frame.length; i++) {\n\t\tconst [,, that] = frame[i];\n\t\tif (last - that > 0.05) { frame.length = i; break; }\n\t\tlast = that;\n\t}\n\tif (frame.length < 3) { return; }\n\t// 时间（s）\n\tconst times = frame.map(f => f[2]);\n\t// 方向速度(px/s)\n\tconst xb = regression(times, frame.map(f => f[0]));\n\tconst yb = regression(times, frame.map(f => f[1]));\n\t// 方向符号\n\tconst xs = Math.sign(xb);\n\tconst ys = Math.sign(yb);\n\t// 方向速度绝对值(px/s)\n\tconst xv = Math.abs(xb);\n\tconst yv = Math.abs(yb);\n\t// 和速度(px/s)\n\tconst v = (xv ** 2 + yv ** 2) ** 0.5;\n\t// 方向速度比\n\tconst xp = xv / v;\n\tconst yp = yv / v;\n\t// 加速度(px/s²)\n\tconst a = 1000;\n\t// 最后帧(px, px, s)\n\tconst [[xf, yf, b]] = frame;\n\t/**\n\t * @returns {[number, number, boolean]}\n\t */\n\tfunction calc() {\n\t\tconst t = performance.now() / 1000;\n\t\t// 时间差(s)\n\t\tconst tt = t - b;\n\t\t// 新的速度(px/s)\n\t\tlet nv = v - tt * a;\n\t\tif (nv <= 0) {\n\t\t\tconst x = xf + xs * xv * v / a / 2;\n\t\t\tconst y = yf + ys * yv * v / a / 2;\n\t\t\treturn [x, y, true];\n\t\t}\n\t\tconst x = xf + xs * (xv + xv - a * xp * tt) * tt / 2;\n\t\tconst y = yf + ys * (yv + yv - a * yp * tt) * tt / 2;\n\t\treturn [x, y, false];\n\n\t}\n\treturn calc;\n}\n\nclass MovableTarget extends HTMLElement {\n\t/** @type {() => void} */\n\t#disconnect;\n\t/** @type {() => void} */\n\t#connect;\n\tconstructor() {\n\t\tsuper();\n\t\t/** @type {() => void} */\n\t\tlet unregister = () => {};\n\t\tthis.#connect = () => {\n\t\t\tlet parent = this.parentNode;\n\t\t\twhile (parent) {\n\t\t\t\tif (parent instanceof Movable$1) { break; }\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t\tif (parent) { unregister = parent.register(this); }\n\t\t};\n\t\tthis.#disconnect = () => { unregister(); };\n\t}\n\t/**\n\t * @returns {void}\n\t */\n\tconnectedCallback() { this.#connect(); }\n\t/**\n\t * @returns {void}\n\t */\n\tdisconnectedCallback() { this.#disconnect(); }\n}\n\n/**\n * @typedef {object} Interface\n * @property {(e: EventTarget[]) => boolean | null} match\n * @property {(width: number, height: number) => void} resize\n * @property {(id: number, x: number, y: number) => boolean?} touchBegin\n * @property {(id: number, x: number, y: number) => void} touchMove\n * @property {(id: number) => void} touchEnd\n * @property {(x: number, y: number, keys: number) => boolean?} mouseBegin\n * @property {(x: number, y: number, keys: number) => void} mouseMove\n * @property {() => void} mouseEnd\n * @property {(deltaMode: number, deltaX: number, deltaY: number, pageX: number, pageY: number) => void} wheel\n */\n\n/**\n *\n * @param {number} x1\n * @param {number} x2\n * @param {number} y1\n * @param {number} y2\n * @returns {number}\n */\nfunction getLength(x1, x2, y1, y2) {\n\treturn ((x1 - x2) ** 2 + (y1 - y2) ** 2) ** 0.5;\n}\n\n\n/**\n *\n * @param {number} v\n * @param {number} area\n * @param {number} target\n * @returns {number}\n */\nfunction calc(v, area, target) {\n\tconst differential = area - target;\n\tconst min = Math.min(differential, 0);\n\tconst max = Math.max(differential, 0);\n\treturn Math.min(Math.max(min, v), max);\n}\n\nconst style = `\n:host{display: block; position: absolute; transform-origin: 0 0; }\n:host([hidden]) { display: none; }\n`;\n\n/**\n *\n * @param {Movable} el\n * @param {Set<EventTarget>} targets\n * @returns {[() => void, () => void, () => void]}\n */\nfunction init(el, targets) {\n\tconst shadow = el.attachShadow({ mode: 'closed' });\n\tshadow.appendChild(document.createElement('style')).textContent = style;\n\tshadow.appendChild(document.createElement('slot'));\n\n\tlet needAdaptively = false;\n\n\t/**\n\t *\n\t * @returns {void}\n\t */\n\tfunction adaptively() {\n\t\tneedAdaptively = true;\n\t\tconst [aWidth, aHeight] = areaSize;\n\t\tif (!aWidth || !aHeight) { return; }\n\t\tneedAdaptively = false;\n\t\tzoom = Math.min(aWidth / el.clientWidth, aHeight / el.clientHeight);\n\t\tx = (aWidth - el.clientWidth * zoom) / 2;\n\t\ty = (aHeight - el.clientHeight * zoom) / 2;\n\t\tel.style.transform = `translate(${x}px,${y}px)scale(${zoom})`;\n\t}\n\n\t/** @type {Record<number, [number, number]>} */\n\tconst touches = {};\n\t/** @type {[number, number]} */\n\tlet areaSize = [0, 0];\n\tlet x = 0;\n\tlet y = 0;\n\tlet zoom = 1;\n\t/**\n\t *\n\t * @param {number} newZoom\n\t * @returns {number}\n\t */\n\tfunction getZoom(newZoom) {\n\t\tconst elWidth = el.clientWidth;\n\t\tconst elHeight = el.clientHeight;\n\t\tconst [areaWidth, areaHeight] = areaSize;\n\t\tif (!areaWidth || !areaHeight) { return newZoom; }\n\t\tconst w = areaWidth / elWidth;\n\t\tconst h = areaHeight / elHeight;\n\t\tconst max = Math.max(w, h, 5);\n\t\tconst min = Math.min(w, h, 0.5);\n\t\treturn Math.max(min, Math.min(newZoom, max));\n\t}\n\n\t/** @type {'touch' | ''} */\n\tlet scaleType = '';\n\t/** @type {undefined | { x: number; y: number; s: number; }} */\n\tlet scaleInfo;\n\n\t/**\n\t *\n\t * @param {number} x1\n\t * @param {number} y1\n\t * @param {number} x2\n\t * @param {number} y2\n\t * @returns {void}\n\t */\n\tfunction scaleBegin(x1, y1, x2, y2) {\n\t\tconst l = getLength(x1, x2, y1, y2);\n\t\tconst z = zoom;\n\t\tif (!l || !z) {\n\t\t\tscaleInfo = undefined;\n\t\t\treturn;\n\t\t}\n\t\tscaleInfo = {\n\t\t\tx: (x - (x1 + x2) / 2) / z,\n\t\t\ty: (y - (y1 + y2) / 2) / z,\n\t\t\ts: z / l,\n\t\t};\n\t}\n\t/**\n\t *\n\t * @param {number} x1\n\t * @param {number} y1\n\t * @param {number} x2\n\t * @param {number} y2\n\t * @returns {void}\n\t */\n\tfunction scaleMove(x1, y1, x2, y2) {\n\t\tif (!scaleInfo) { return; }\n\t\tconst l = getLength(x1, x2, y1, y2);\n\t\tif (!l) { return; }\n\t\tconst { s, x: ox, y: oy } = scaleInfo;\n\t\tconst newZoom = getZoom(l * s);\n\t\tzoom = newZoom;\n\t\tx = ox * newZoom + (x1 + x2) / 2;\n\t\ty = oy * newZoom + (y1 + y2) / 2;\n\t\tupdate();\n\t}\n\t/**\n\t *\n\t * @returns {void}\n\t */\n\tfunction scaleStop() {\n\t\tscaleType = '';\n\t\tscaleInfo = undefined;\n\t}\n\n\n\t/** @type {'touch' | 'roller'| 'leftMouse' | ''} */\n\tlet moveType = '';\n\t/**\n\t * @typedef {object} MoveInfo\n\t * @property {number} x\n\t * @property {number} y\n\t * @property {number} bx\n\t * @property {number} by\n\t * @property {[x: number, y: number, t: number][]} frame\n\t */\n\t/**\n\t * @type {MoveInfo | undefined}\n\t */\n\tlet moveInfo;\n\tlet moveAnimation = 0;\n\t/**\n\t *\n\t * @param {number} pageX\n\t * @param {number} pageY\n\t * @returns {void}\n\t */\n\tfunction moveBegin(pageX, pageY) {\n\t\tcancelAnimationFrame(moveAnimation);\n\t\tmoveInfo = undefined;\n\t\tmoveInfo = {\n\t\t\tx,\n\t\t\ty,\n\t\t\tframe: [[x, y, performance.now() / 1000]],\n\t\t\tbx: pageX,\n\t\t\tby: pageY,\n\t\t};\n\n\t}\n\t/**\n\t *\n\t * @param {number} pageX\n\t * @param {number} pageY\n\t * @returns {void}\n\t */\n\tfunction moveMove(pageX, pageY) {\n\t\tif (!moveInfo) { return; }\n\t\tconst { x: ox, y: oy, bx, by } = moveInfo;\n\t\tx = ox + pageX - bx;\n\t\ty = oy + pageY - by;\n\t\t/** @type {[x: number, y: number, t: number]} */\n\t\tconst current = [x, y, performance.now() / 1000];\n\t\tmoveInfo.frame = [current, ...moveInfo.frame].slice(0, 20);\n\t\tupdate();\n\t}\n\t/**\n\t *\n\t * @returns {void}\n\t */\n\tfunction moveEnd() {\n\t\tif (!moveInfo) { return; }\n\t\tmoveType = '';\n\t\tconst { frame } = moveInfo;\n\t\tmoveInfo = undefined;\n\t\tif (!el.inertia) { return; }\n\t\tconst calc = getInertiaFn(frame);\n\t\tif (!calc) { return; }\n\t\t/**\n\t\t *\n\t\t * @returns {void}\n\t\t */\n\t\tconst run = () => {\n\t\t\t/** @type {boolean} */\n\t\t\tlet stop;\n\t\t\t[x, y, stop] = calc();\n\t\t\tupdate();\n\t\t\tif (!el.inertia) { return; }\n\t\t\tif (stop) { return; }\n\t\t\tmoveAnimation = requestAnimationFrame(run);\n\t\t};\n\t\trun();\n\t}\n\t/**\n\t *\n\t * @returns {void}\n\t */\n\tfunction moveStop() {\n\t\tcancelAnimationFrame(moveAnimation);\n\t\tmoveType = '';\n\t\tmoveInfo = undefined;\n\t}\n\n\t/** @type {Interface} */\n\tconst movableAreaMember = {\n\t\tresize(width, height) {\n\t\t\tareaSize = [width, height];\n\t\t\tif (el.autoAdaptively || needAdaptively) { adaptively(); }\n\t\t},\n\t\tmatch(e) {\n\t\t\tif (!e.length) { return el.global || false; }\n\t\t\tif (e[0] !== el) { return false; }\n\t\t\tif (!targets.size) { return true; }\n\t\t\tconst list = new Set(e);\n\t\t\tfor (const t of targets) { if (list.has(t)) { return true; } }\n\t\t\treturn null;\n\t\t},\n\n\t\ttouchMove(id, x, y) {\n\t\t\ttouches[id] = [x, y];\n\t\t\tconst touchList = Object.values(touches);\n\t\t\tif (moveType === 'touch') {\n\t\t\t\tif (touchList.length !== 1) { return moveStop(); }\n\t\t\t\tconst [t1] = touchList;\n\t\t\t\tmoveMove(t1[0], t1[1]);\n\t\t\t}\n\t\t\tif (scaleType !== 'touch') { return; }\n\t\t\tif (!el.touchScalable || touchList.length !== 2) {\n\t\t\t\treturn scaleStop();\n\t\t\t}\n\t\t\tconst [t1, t2] = touchList;\n\t\t\tscaleMove(t1[0], t1[1], t2[0], t2[1]);\n\t\t},\n\t\ttouchBegin(id, x, y) {\n\t\t\ttouches[id] = [x, y];\n\t\t\tconst touchList = Object.values(touches);\n\t\t\tif (touchList.length === 1) {\n\t\t\t\tif (!moveType && el.touchMovable) {\n\t\t\t\t\tscaleStop();\n\t\t\t\t\tmoveType = 'touch';\n\t\t\t\t\tmoveBegin(x, y);\n\t\t\t\t\treturn el.touchCapture;\n\t\t\t\t}\n\t\t\t} else if (touchList.length === 2) {\n\t\t\t\tif (!scaleType && el.touchScalable) {\n\t\t\t\t\tmoveStop();\n\t\t\t\t\tscaleType = 'touch';\n\t\t\t\t\tconst [t1, t2] = touchList;\n\t\t\t\t\tscaleBegin(t1[0], t1[1], t2[0], t2[1]);\n\t\t\t\t\treturn el.touchCapture;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\ttouchEnd(id) {\n\t\t\tdelete touches[id];\n\t\t\tif (scaleType === 'touch') { scaleStop(); }\n\t\t\tif (moveType === 'touch') { moveEnd(); }\n\t\t},\n\t\tmouseMove(x, y, keys) {\n\t\t\tif (moveType === 'leftMouse' && !(keys & 1) || moveType === 'roller' && !(keys & 4)) {\n\t\t\t\tmoveEnd();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!moveType) { return; }\n\t\t\tmoveMove(x, y);\n\t\t},\n\t\tmouseBegin(x, y, keys) {\n\t\t\tif (moveType) { return null; }\n\t\t\t/** @type {'leftMouse' | 'roller' | ''} */\n\t\t\tlet type = '';\n\t\t\t/** @type {boolean?} */\n\t\t\tlet res = null;\n\t\t\tif (keys & 1) {\n\t\t\t\tif (!el.leftMouseMovable) { return null; }\n\t\t\t\ttype = 'leftMouse';\n\t\t\t\tres = el.leftMouseMovableCapture;\n\t\t\t} else if (keys & 4) {\n\t\t\t\tif (!el.rollerMovable) { return null; }\n\t\t\t\ttype = 'roller';\n\t\t\t\tres = el.rollerMovableCapture;\n\t\t\t}\n\t\t\tscaleStop();\n\t\t\tmoveType = type;\n\t\t\tmoveBegin(x, y);\n\t\t\treturn res;\n\t\t},\n\t\tmouseEnd() {\n\t\t\tif (!moveType) { return; }\n\t\t\tmoveEnd();\n\t\t},\n\t\twheel(mode, dx, dy, px, py) {\n\t\t\tif (!el.rollerScalable) { return; }\n\t\t\tconst v = Math.abs(dx) > Math.abs(dy) ? dx : dy;\n\t\t\tif (v === 0) { return; }\n\t\t\tscaleStop();\n\t\t\tconst abs = Math.abs(v);\n\t\t\tlet base = 0;\n\t\t\tif (v > 0) {\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase 0: base = 1.01; break;\n\t\t\t\t\tcase 1: base = 1.25; break;\n\t\t\t\t\tcase 2: base = 1.6; break;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (mode) {\n\t\t\t\t\tcase 0: base = 1 / 1.01; break;\n\t\t\t\t\tcase 1: base = 1 / 1.25; break;\n\t\t\t\t\tcase 2: base = 1 / 1.6; break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst oldZoom = zoom;\n\t\t\tconst newZoom = getZoom(base ** abs * oldZoom);\n\t\t\tzoom = newZoom;\n\t\t\tx = (x - px) / oldZoom * newZoom + px;\n\t\t\ty = (y - py) / oldZoom * newZoom + py;\n\t\t\tupdate();\n\t\t},\n\t};\n\n\t/** @type {() => void} */\n\tlet unregister = () => { };\n\n\t/**\n\t *\n\t * @returns {void}\n\t */\n\tfunction update() {\n\t\tconst [areaWidth, areaHeight] = areaSize;\n\t\tif (!areaWidth || !areaHeight) {\n\t\t\tel.style.transform = `translate(${x}px,${y}px)scale(${zoom})`;\n\t\t}\n\t\tx = calc(x, areaWidth, el.clientWidth * zoom);\n\t\ty = calc(y, areaHeight, el.clientHeight * zoom);\n\t\tel.style.transform = `translate(${x}px,${y}px)scale(${zoom})`;\n\t}\n\treturn [() => {\n\t\tif (el.autoAdaptively) { requestAnimationFrame(adaptively); }\n\n\t\tlet parent = el.parentNode;\n\t\twhile (parent) {\n\t\t\tif (parent instanceof MovableArea) { break; }\n\t\t\tparent = parent.parentNode;\n\t\t}\n\t\tif (parent) {\n\t\t\tunregister = parent.register(movableAreaMember);\n\t\t}\n\t\t// TODO: 绑定到页面中\n\t}, () => {\n\t\tunregister();\n\t}, adaptively];\n}\n/**\n *\n * @param {HTMLElement} el\n * @param {string} name\n * @param {string | boolean} value\n * @returns {void}\n */\nfunction setBoolAttr(el, name, value) {\n\tif (!value && value !== '') {\n\t\tel.removeAttribute(name);\n\t\treturn;\n\t}\n\tel.setAttribute(name, value === true ? '' : value);\n}\n\nclass Movable extends HTMLElement {\n\tstatic get Area() { return MovableArea; }\n\tstatic get Target() { return MovableTarget; }\n\t/**\n\t * 是否拥有惯性\n\t * @type {boolean}\n\t */\n\tget inertia() { return this.getAttribute('inertia') !== null; }\n\tset inertia(v) { setBoolAttr(this, 'inertia', v); }\n\t/**\n\t * 触屏是否捕获\n\t * @type {boolean}\n\t */\n\tget touchCapture() { return this.getAttribute('touch-capture') !== null; }\n\tset touchCapture(v) { setBoolAttr(this, 'touch-capture', v); }\n\t/**\n\t * 是否支持触屏移动\n\t * @type {boolean}\n\t */\n\tget touchMovable() { return this.getAttribute('touch-movable') !== null; }\n\tset touchMovable(v) { setBoolAttr(this, 'touch-movable', v); }\n\t/**\n\t * 是否支持触屏缩放\n\t * @type {boolean}\n\t */\n\tget touchScalable() { return this.getAttribute('touch-scalable') !== null; }\n\tset touchScalable(v) { setBoolAttr(this, 'touch-scalable', v); }\n\t/**\n\t * 是否支持鼠标滚论移动\n\t * @type {boolean}\n\t */\n\tget rollerMovable() { return this.getAttribute('roller-movable') !== null; }\n\tset rollerMovable(v) { setBoolAttr(this, 'roller-movable', v); }\n\t/**\n\t * 鼠标滚论移动是否捕获\n\t * @type {boolean}\n\t */\n\tget rollerMovableCapture() { return this.getAttribute('roller-movable-capture') !== null; }\n\tset rollerMovableCapture(v) { setBoolAttr(this, 'roller-movable-capture', v); }\n\t/**\n\t * 是否支持鼠标滚论缩放\n\t * @type {boolean}\n\t */\n\tget rollerScalable() { return this.getAttribute('roller-scalable') !== null; }\n\tset rollerScalable(v) { setBoolAttr(this, 'roller-scalable', v); }\n\t/**\n\t * 是否支持鼠标左键移动\n\t * @type {boolean}\n\t */\n\tget leftMouseMovable() { return this.getAttribute('left-mouse-movable') !== null; }\n\tset leftMouseMovable(v) { setBoolAttr(this, 'left-mouse-movable', v); }\n\t/**\n\t * 鼠标左键移动是否捕获\n\t * @type {boolean}\n\t */\n\tget leftMouseMovableCapture() { return this.getAttribute('left-mouse-movable-capture') !== null; }\n\tset leftMouseMovableCapture(v) { setBoolAttr(this, 'left-mouse-movable-capture', v); }\n\t/**\n\t * 是否自动自适应\n\t * @type {boolean}\n\t */\n\tget autoAdaptively() { return this.getAttribute('adaptively') !== null; }\n\tset autoAdaptively(v) { setBoolAttr(this, 'adaptively', v); }\n\t/**\n\t * 是否在整个 `<nl-movable-area>` 区域内操作都有效\n\t * @type {boolean}\n\t */\n\tget global() { return this.getAttribute('global') !== null; }\n\tset global(v) { setBoolAttr(this, 'global', v); }\n\t/** @type {Set<EventTarget>} */\n\t#targets = new Set();\n\t/** @type {() => void} */\n\t#connect;\n\t/** @type {() => void} */\n\t#disconnect;\n\t/** @type {() => void} */\n\t#adaptively;\n\tconstructor() {\n\t\tsuper();\n\t\t[\n\t\t\tthis.#connect,\n\t\t\tthis.#disconnect,\n\t\t\tthis.#adaptively,\n\t\t] = init(this, this.#targets);\n\t}\n\t/**\n\t *\n\t * @param {EventTarget} o\n\t * @returns {() => void}\n\t */\n\tregister(o) {\n\t\tconst targets = this.#targets;\n\t\ttargets.add(o);\n\t\treturn () => { targets.delete(o); };\n\t}\n\t/**\n\t * 自适应\n\t * @returns {void}\n\t */\n\tadaptively() { this.#adaptively(); }\n\t/**\n\t * @returns {void}\n\t */\n\tconnectedCallback() { this.#connect(); }\n\t/**\n\t * @returns {void}\n\t */\n\tdisconnectedCallback() { this.#disconnect(); }\n\t/**\n\t * @returns {void}\n\t */\n\tadoptedCallback() { }\n}\n\ncustomElements.define('nl-movable-area', MovableArea);\ncustomElements.define('nl-movable', Movable);\ncustomElements.define('nl-movable-target', MovableTarget);\n\n/** @typedef {MovableArea} Movable.Area */\n/** @typedef {MovableTarget} Movable.Target */\nvar Movable$1 = Movable;\n\nexport { Movable$1 as default };\n","/*!\n * 匿龙组件库 @nyloong/components v0.2.0\n * (c) 2023-2024 猛火Fierflame\n * @license MIT\n */\nconst style = `\n:host {\n\tdisplay: inline-block;\n\toverflow: hidden;\n\n\tposition: relative;\n\tcontainer-name: host;\n}\n:host([hidden]) { display: none; }\n\n.value {\n\tcolor: transparent;\n\ttext-align: center;\n\ttext-orientation: upright;\n\tinline-size: 100%;\n\tblock-size: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n}\n.root {\n\tcounter-reset: nl-roll-digit -1;\n\tposition: absolute;\n\ttext-align: center;\n\ttext-orientation: upright;\n\tinline-size: 100%;\n\tblock-size: 1000%;\n\ttransition: all 1.5s;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-around;\n\toverflow: hidden;\n\tuser-select: none;\n\tpointer-events: none;\n}\n.root span {\n\tflex: 1;\n\toverflow: hidden;\n\tcounter-increment: nl-roll-digit;\n}\n.root span::before {\n\tcontent: counter(nl-roll-digit)\n}\n`;\n\n/**\n * 数字滚动组件\n * 不支持 CSS `writing-mode`\n */\nclass RollDigit extends HTMLElement {\n\tstatic observedAttributes = ['digit'];\n\t#style = document.createElement('style');\n\t#value = document.createElement('span');\n\t#digit() {\n\t\tconst n = this.digit;\n\t\tconst style = `.root { translate: 0 -${n * 10}%; }`;\n\t\tthis.#value.innerText = `${n}`;\n\t\tthis.#style.textContent = style;\n\t}\n\tconstructor() {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({mode:'closed'});\n\t\tshadow.appendChild(this.#style);\n\t\tshadow.appendChild(document.createElement('style')).textContent = style;\n\t\tconst main = shadow.appendChild(document.createElement('span'));\n\t\tmain.className = 'root';\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tmain.appendChild(document.createElement('span'));\n\t\t}\n\t\tshadow.appendChild(this.#value).className = 'value';\n\t}\n\t/**\n\t * 显示的数字\n\t * @type {number}\n\t */\n\tget digit() {\n\t\treturn (parseInt(this.getAttribute('digit') || '') || 0) % 10;\n\t}\n\t/** @type {number | string | null | undefined} */\n\tset digit(digit) {\n\t\tif (digit === undefined || digit === null) {\n\t\t\tthis.removeAttribute('digit');\n\t\t} else {\n\t\t\tthis.setAttribute('digit', String(digit));\n\t\t}\n\t}\n\tconnectedCallback() {\n\t\tthis.#digit();\n\t}\n\t/**\n\t * @param {string} attrName\n\t * @param {string | null} oldVal\n\t * @param {string | null} newVal\n\t * @returns {void}\n\t * @protected\n\t */\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (oldVal === newVal) { return; }\n\t\tswitch (attrName) {\n\t\t\tcase 'digit': {\n\t\t\t\tthis.#digit();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\ncustomElements.define('nl-roll-digit', RollDigit);\n\nexport { RollDigit as default };\n"],"names":["Angle","HTMLElement","static","printer","document","createElement","internals","this","attachInternals","constructor","super","root","attachShadow","mode","appendChild","textContent","onTouch","event","buttons","left","width","top","height","getBoundingClientRect","x","clientX","y","clientY","value","Math","atan2","PI","round","dispatchEvent","InputEvent","addEventListener","getAttribute","v","a","parseInt","String","Number","isFinite","style","transform","setFormValue","connectedCallback","setAttribute","customElements","define","Breadcrumb","separator","newVal","JSON","stringify","shadow","removeAttribute","attributeChangedCallback","attrName","oldVal","openMenus","Set","e","isPrimary","els","composedPath","menu","has","close","verticalWritingMode","hasPopover","prototype","showPopover","directionDefault","alignDefault","subMenuDirection","subMenuAlign","Menu","show","open","hasAttribute","disabled","modal","parseFloat","target","direction","align","Array","isArray","filter","Boolean","join","label","dialog","name","parentMenu","stopPropagation","dialogSlot","list","index","indexOf","slice","find","Element","HTMLHRElement","currentSubMenu","includes","mounted","update","preventDefault","capture","targetElement","el","subMenu","parent","delete","classList","remove","popover","updateLayout","add","showModal","requestAnimationFrame","rowVertical","rowReverse","colReverse","getTarget","parentElement","querySelector","size","window","innerWidth","innerHeight","reverse","getSize","inlineStart","inlineSize","inlineEnd","blockStart","blockSize","blockEnd","d","s","rect","inline","block","dirs","map","dir","reduce","r","blockDir","inlineStartX","inlineSizeX","inlineEndX","blockStartX","blockSizeX","blockEndX","rowSize","colSize","insetInlineStart","insetBlockStart","max","min","getComputedStyle","writingMode","toLowerCase","getLayout","parentNode","hidden","disconnectedCallback","val","push","replace","split","length","getDirections","getAligns","MovableArea","children","connect","disconnect","observer","ResizeObserver","last","pop","contentRect","t","resize","k","findIndex","child","match","touchTargets","pointerup","pointerId","hasPointerCapture","releasePointerCapture","pointerType","mouseEnd","touchEnd","deltaMode","deltaX","deltaY","pageX","pageY","OffX","OffY","wheel","touchMove","mouseMove","state","mouseBegin","touchBegin","setPointerCapture","observe","unobserve","init$1","register","o","adoptedCallback","regression","tb","b","vb","_","i","MovableTarget","unregister","Movable$1","getLength","x1","x2","y1","y2","calc","area","differential","init","targets","needAdaptively","adaptively","aWidth","aHeight","areaSize","zoom","clientWidth","clientHeight","touches","getZoom","newZoom","elWidth","elHeight","areaWidth","areaHeight","w","h","scaleInfo","scaleType","scaleBegin","l","undefined","scaleMove","ox","oy","scaleStop","moveInfo","moveType","moveAnimation","moveBegin","cancelAnimationFrame","frame","performance","now","bx","by","moveMove","current","moveEnd","inertia","that","times","f","xb","yb","xs","sign","ys","xv","abs","yv","xp","yp","xf","yf","tt","getInertiaFn","run","stop","moveStop","movableAreaMember","autoAdaptively","global","id","touchList","Object","values","t1","touchScalable","t2","touchMovable","touchCapture","keys","type","res","leftMouseMovable","leftMouseMovableCapture","rollerMovable","rollerMovableCapture","dx","dy","px","py","rollerScalable","base","oldZoom","setBoolAttr","Movable","Area","Target","RollDigit","digit","n","innerText","main","className"],"mappings":"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"}